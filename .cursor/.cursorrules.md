# 프로젝트 코딩 규칙

## 클린 코드 원칙

### 1. 함수 작성 규칙
- 함수는 단일 책임 원칙(SRP)을 준수해야 합니다
- 함수는 가능한 한 순수 함수로 작성합니다
- 함수명은 동사+명사 형태로 작성하며, suffix는 명사로 끝나야 합니다
- 함수명에 동사를 suffix로 붙이지 않습니다
- 함수는 arrow function 형태로 작성합니다

### 2. 변수명 규칙
- 변수명은 명사 또는 대명사 형태로 작성합니다
- data1, data2 같은 형태의 변수명은 사용하지 않습니다
- useMemo, const, let으로 선언되는 변수명은 대명사 또는 명사로 명명합니다 (동사 형태 사용 금지)
- 내장 함수 사용 시 변수명을 축약(v, d 등)하지 않고, 명확한 명사 + suffix(items) 형태로 작성합니다
- **Boolean 변수명은 반드시 `is` 접두사를 붙이고 명사형으로 작성합니다**
  - 예: `isAllSheetNames`, `isEnabled`, `isValid`

### 3. 컴포넌트 규칙
- 컴포넌트명은 명사 또는 대명사 형태로 작성하며, 맨 앞 글자는 대문자로 작성합니다
- 컴포넌트에 익명 함수를 사용하지 않으며, 무조건 함수 선언 후 props로 넘기도록 작성합니다
- utils 파일에서 공통 사용 내용은 가져와서 사용하도록 파일 검색을 진행합니다
- 컴포넌트는 arrow function 형태로 작성합니다

### 4. React Query Custom Hook
- react-query 사용하여 custom hook 생성 시 prefix에 use를 무조건 붙입니다

### 5. React Anti-pattern 금지
- 연산된 결과를 다시 상태에 담아서 사용하는 로직은 절대 금지합니다

## Early Return 패턴

### 1. if 문 작성 규칙
- **모든 if 문은 early return 패턴을 사용합니다**
- **else 구문은 사용하지 않습니다**
- 중첩된 if 문을 피하고, 조건을 만족하지 않으면 즉시 return 합니다
- 가독성을 위해 guard clause를 적극 활용합니다

### 2. Early Return 예시
```typescript
// ❌ 나쁜 예
function processData(data: string | null) {
  if (data) {
    if (data.length > 0) {
      // 처리 로직
      return result;
    }
  } else {
    return null;
  }
  return null;
}

// ✅ 좋은 예
const processData = (data: string | null): Result | null => {
  if (!data) {
    return null;
  }
  
  if (data.length === 0) {
    return null;
  }
  
  // 처리 로직
  return result;
};
```

### 3. 에러 처리
- 에러 케이스는 함수 상단에서 early return으로 처리합니다
- try-catch 블록 내부에서도 early return을 활용합니다
- 에러 처리는 선언형 프로그래밍 방식으로 함수로 분리합니다

## 코드 가독성

### 1. 우선순위
- 가독성을 첫 번째 우선으로 생각하여 코드를 작성합니다
- 클린코드를 원칙으로 합니다

### 2. SOLID 원칙
- SOLID 원칙에 따라 함수는 단일 책임 원칙을 준수합니다
- 함수형 원칙에 의거하여 구현합니다

## 파일 구조

### 1. 기능 기반 구조
- 기능 기반 구조로 파일을 구성합니다
- utils 파일에서 공통 로직을 관리합니다
- 각 파일은 단일 책임을 가집니다

### 2. 디렉토리 구조
```
src/
├── extension.ts          # 메인 진입점
├── types/                # 타입 정의
├── utils/                # 순수 유틸리티 함수
├── services/             # 비즈니스 로직
└── providers/            # VS Code Provider 구현
```

### 3. 순환 참조 방지 규칙
- **순환 참조(Circular Dependency)는 절대 발생하지 않도록 해야 합니다**
- Import 의존성은 단방향으로만 흐르도록 구성합니다
- 의존성 방향: `types` → `utils` → `services/providers` → `extension.ts`
- 같은 레벨의 디렉토리 간 직접 참조는 금지합니다
- 중복 코드는 공통 utils로 분리하여 재사용합니다

#### 의존성 규칙
```
types/ (의존성 없음)
  ↓
utils/ (types만 import 가능)
  ↓
services/, providers/ (types, utils만 import 가능)
  ↓
extension.ts (모든 모듈 import 가능)
```

#### 순환 참조 방지 체크리스트
- [ ] 파일 A가 파일 B를 import하고, 파일 B가 파일 A를 import하는 경우가 없는지 확인
- [ ] 같은 디렉토리 내 파일들이 서로를 import하는 경우가 없는지 확인
- [ ] 중복된 함수나 타입이 여러 파일에 정의되어 있지 않은지 확인
- [ ] 공통으로 사용되는 함수는 utils로 분리했는지 확인
- [ ] 공통으로 사용되는 타입은 types로 분리했는지 확인

#### 순환 참조 해결 방법
1. **공통 코드 분리**: 중복된 함수나 타입을 utils 또는 types로 이동
2. **의존성 역전**: 상위 레벨 모듈로 공통 로직 이동
3. **인터페이스 분리**: 타입만 별도 파일로 분리하여 `import type` 사용
4. **의존성 주입**: 필요한 함수를 파라미터로 전달하는 방식으로 변경

## TypeScript 규칙

### 1. 타입 정의
- 타입은 `types/` 디렉토리에 정의합니다
- 타입명은 PascalCase로 작성합니다
- 타입은 명확하고 구체적으로 작성합니다

### 2. 함수 시그니처
- 함수는 명시적인 반환 타입을 가집니다
- 파라미터 타입은 명시적으로 작성합니다
- Optional 파라미터는 `?`를 사용합니다

## 에러 처리

### 1. 선언형 프로그래밍
- 에러 처리는 선언형 프로그래밍 방식으로 함수로 분리합니다
- 에러 처리 로직은 재사용 가능한 함수로 작성합니다
- 에러 메시지는 명확하고 사용자 친화적으로 작성합니다

### 2. 에러 처리 예시
```typescript
// ✅ 좋은 예: 선언형 에러 처리
const handleApiError = (error: unknown): Error => {
  return handleAxiosError(error);
};

try {
  // API 호출
} catch (error) {
  throw handleApiError(error);
}
```

## 코드 스타일

### 1. Arrow Function
- 함수는 arrow function 형태로 작성합니다
- 컴포넌트도 arrow function으로 작성합니다

### 2. Import 순서
- 외부 라이브러리 import
- 내부 모듈 import
- 타입 import는 `import type` 사용

### 3. 함수 분리
- 복잡한 로직은 작은 함수로 분리합니다
- 각 함수는 단일 책임을 가집니다
- 함수는 순수 함수로 작성합니다

## 네이밍 컨벤션

### 1. 변수명
- camelCase 사용
- 명사 또는 대명사 형태
- Boolean은 `is` 접두사 필수

### 2. 함수명
- camelCase 사용
- 동사+명사 형태
- suffix는 명사로 끝남

### 3. 타입명
- PascalCase 사용
- 명사 형태

### 4. 상수명
- UPPER_SNAKE_CASE 사용

## 프로젝트 특화 규칙

### 1. VS Code Extension
- VS Code API는 `vscode` 네임스페이스에서 가져옵니다
- Provider는 `providers/` 디렉토리에 구현합니다
- 서비스 로직은 `services/` 디렉토리에 구현합니다

### 2. 비동기 처리
- async/await를 사용합니다
- Promise는 명시적으로 타입을 지정합니다
- 에러 처리는 try-catch로 처리합니다

### 3. 설정 관리
- VS Code 설정은 `vscode.workspace.getConfiguration`을 사용합니다
- 설정값은 명확한 변수명으로 저장합니다
- 기본값은 nullish coalescing(`??`) 또는 OR(`||`) 연산자로 처리합니다
